<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

    <link rel="stylesheet" type="text/css" href="./style.css">
    <title>search</title>
    <style>
        /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
        #map {
            height: 100%;
        }

        /* Optional: Makes the sample page fill the window. */
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class='nav-bar'>
        <div class="nav-wrapper">
            <a class="brand-logo"><img class="logo"
                    src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQKFAQWfF_WHjavaAx0X1IKBj7oJYhEOjrweQ&usqp=CAU"
                    alt="Beer with Hops" /></a>
            <a href="#" data-target="mobile-menu" class="sidenav-trigger"><i class="material-icons">menu</i></a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a href="./index.html">Home</a></li>
                <li><a href="./top10.html">Top 10 Breweries</a></li>
                <li><a href="./search.html">Brewery By Name</a></li>
                <li><a href="./locator.html">Brewery Map Locator</a></li>
                <li><a href="./favorites.html">Favorite Breweries</a></li>
            </ul>
        </div>
    </nav>
    <ul class="sidenav" id="mobile-menu">
        <li><a href="./index.html">Home</a></li>
        <li><a href="./search.html">Brewery By Name</a></li>
        <li><a href="./locator.html">Brewery Map Locator</a></li>
        <li><a href="./favorites.html">Favorite Breweries</a></li>
    </ul>
    <!-- End navbar -->



    <nav class='nav-bar2'>
        <input id="pac-input" class="controls" type="text" placeholder="Search Box" />
    </nav>

    <h3>Brewery Search By Location</h3>
    <div id="map"></div>
    <div id="locationResults" class="container">

    </div>






    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCA-nK8SdguDxQyi-Uj2qssUMZTw3B49DA&callback=initMap">
        </script>
    <script src="index.js"></script>
    <script type="text/javascript">
        // api key >>  https://positionstack.com/
        let myKey = 'c6653693bf159f53078e19a4e8aad4b2'
        //let lat = '40.7638435'
        let lat = '35.2270869'
        //let lon = '-73.9729691'
        let lon = '-80.8431267'
        let url = `http://api.positionstack.com/v1/reverse?access_key=${myKey}&query=${lat},${lon}`
        function GetAddress() {
            fetch(url)
                .then(response => response.json())
                .then(data => console.log(data));
        }
        GetAddress()

        function initialize() {

            var markers = [];
            var map = new google.maps.Map(document.getElementById('map-canvas'), {
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            var defaultBounds = new google.maps.LatLngBounds(
                new google.maps.LatLng(-33.8902, 151.1759),
                new google.maps.LatLng(-33.8474, 151.2631));
            map.fitBounds(defaultBounds);

            var input = /** @type {HTMLInputElement} */(
                document.getElementById('pac-input'));
            map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

            var searchBox = new google.maps.places.SearchBox(
  /** @type {HTMLInputElement} */(input));

            google.maps.event.addListener(searchBox, 'places_changed', function () {
                var places = searchBox.getPlaces();

                if (places.length == 0) {
                    return;
                }
                for (var i = 0, marker; marker = markers[i]; i++) {
                    marker.setMap(null);
                }

                markers = [];
                var bounds = new google.maps.LatLngBounds();
                for (var i = 0, place; place = places[i]; i++) {
                    var image = {
                        url: place.icon,
                        size: new google.maps.Size(71, 71),
                        origin: new google.maps.Point(0, 0),
                        anchor: new google.maps.Point(17, 34),
                        scaledSize: new google.maps.Size(25, 25)
                    };

                    var marker = new google.maps.Marker({
                        map: map,
                        icon: image,
                        title: place.name,
                        position: place.geometry.location
                    });

                    markers.push(marker);

                    bounds.extend(place.geometry.location);
                }

                map.fitBounds(bounds);
            });

            google.maps.event.addListener(map, 'bounds_changed', function () {
                var bounds = map.getBounds();
                searchBox.setBounds(bounds);
            });
        }

        google.maps.event.addDomListener(window, 'load', initialize);


    </script>
</body>

</html>